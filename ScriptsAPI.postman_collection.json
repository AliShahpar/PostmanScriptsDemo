{
	"info": {
		"_postman_id": "3a155ef7-0116-4838-a185-a92ae2646a59",
		"name": "AdminAPI",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get Access Token using Authorization",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d3e44442-a57d-4573-b679-cd0f8c2822ac",
						"exec": [
							"var data=JSON.parse(responseBody);",
							"pm.environment.set(\"Id_token\", data.id_token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "oauth2",
					"oauth2": [
						{
							"key": "accessToken",
							"value": "AQABAAAAAACQN9QBRU3jT6bcBQLZNUj7d3jr7lF7sGMLgXHCDdpp24kh7VJ-TfHCWkyxzmrAsm-MBqHDP3aTpXpEpThML4rz-LUYn0aaoH0Oifiw1A5ywzaGH0czKyY8XYEV7A4UQiONlRbJD4eWUSYZRK8BlMUEf7FMk7i415KucqscibqPxVLsrokTrP4uOkx6tG0lRw6c8doFGffbMEuFl-tfinZOA-imeK3OvGrG-a39GGqDnsL779Gnurve7-12IdfIL0pZvrOZbC5hg-sEWMSjIKcosf-LsTsMPeACUvHYfd-a2cMbxAovm19NxPgdK3yqYAHjkCKX7CFAVzCjCMfiXUbOe1ALUoovQXMaErBTcir8jXmSjHC_jc-5TPZv9DpFlUIw_YENd18ByFAUU4I-i3p-yzJvTR3HlMinVTihxEXPXOCclMs1C3aur3LCZ2lM_UJnJtAZYPkI2C9k1PMHewb3gBSJDzwgSGuW-rXT9qgfstFcXRfKaZaJxm__754vP55FBJZFq0Vbw674v-IjW-b-vRXYfaCHyt3t2_LIhreXvRQMgzDlzmYgX5exG5BZ9sbruo9KPgfs1xMXWpjPB0-k3LhvAo7r1W5SRpTUVGkq8TOXGj90h-BYrI2w74J4388mFr9twuxgPTUPxQgDUV5iNg5cHFTExGCNxV6Ir6TYkIN7SQtCph729cqrgFANZkMgAA",
							"type": "string"
						},
						{
							"key": "tokenType",
							"value": "Bearer",
							"type": "string"
						},
						{
							"key": "addTokenTo",
							"value": "queryParams",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "urlencoded",
					"urlencoded": []
				},
				"url": {
					"raw": ""
				},
				"description": "use the authorization tab to generation a new access token, the response contains access and Id_token, however we will use Id_token for subsequent Admin API calls"
			},
			"response": []
		},
		{
			"name": "Get Clients",
			"request": {
				"method": "GET",
				"header": [
					{
						"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/clients",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Voucher Types",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/voucher/types",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"voucher",
						"types"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Rule Operators",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/rules/operators",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"rules",
						"operators"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Rule Property Names",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/rules/propertyNames",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"rules",
						"propertyNames"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Client Rules",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/clients/34526e93-e34c-4063-afb9-5444b2759e11/rules",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients",
						"34526e93-e34c-4063-afb9-5444b2759e11",
						"rules"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get All Rules",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/rules",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"rules"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Client Details",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"name": "Content-Type",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "bearer {{auth_token}}"
					}
				],
				"url": {
					"raw": "{{base_url_admin}}/clients/75987e93-e34c-4063-afb9-5444b2759e45",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients",
						"75987e93-e34c-4063-afb9-5444b2759e45"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Client",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"oauthClientId\": \"11987e93-e34c-4063-afb9-5444b2759e11\",\r\n  \"oauthSecret\": \"[0ECmntfDn7-i:sR5rj/k1MM-XC*ABCD\",\r\n  \"displayName\": \"Matas Client\",\r\n  \"active\": true\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/clients",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Rule",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"name\": \"DailyLimitRule\",\r\n  \"propertyName\": \"VoucherCount\",\r\n  \"operator\": 0,\r\n  \"active\": true,\r\n  \"errorMessage\": \"Daily limit exceeded\"\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/rule",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"rule"
					]
				}
			},
			"response": []
		},
		{
			"name": "Add Client Rule",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"ruleId\": 1,\r\n  \"voucherTypeId\": 1,\r\n  \"value\": \"35\"\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/clients/34526e93-e34c-4063-afb9-5444b2759e11/rules",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients",
						"34526e93-e34c-4063-afb9-5444b2759e11",
						"rules"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Client Rule",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"ruleId\": 1,\r\n  \"voucherTypeId\": 1,\r\n  \"value\": \"35\"\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/clients/rules/1",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients",
						"rules",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Client Details",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"oauthSecret\": \"[0ECmntfDn7-i:sR5rj/k1MM-XC*ABCD\",\r\n  \"displayName\": \"Matas Client Postman\",\r\n  \"active\": true\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/clients/34526e93-e34c-4063-afb9-5444b2759e11",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"clients",
						"34526e93-e34c-4063-afb9-5444b2759e11"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update Rule",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"name\": \"DailyLimitRule\",\r\n  \"propertyName\": \"VoucherCount\",\r\n  \"operator\": 0,\r\n  \"active\": true,\r\n  \"errorMessage\": \"Provide Type is not Allowed\"\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/rules/1",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"rules",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "Update VoucherType",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "bearer {{auth_token}} ",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"discountId\": \"52500\",\r\n  \"discountName\": \"Rosemunde Tasker Spar 249kr\",\r\n  \"couponId\": \"456\",\r\n  \"startDate\": \"2019-10-16T03:17:05.6186973+00:00\",\r\n  \"endDate\": \"2019-10-16T03:17:05.6186995+00:00\",\r\n  \"discountType\": \"RabatbelÃ¸b\",\r\n  \"value\": \"24\"\r\n}"
				},
				"url": {
					"raw": "{{base_url_admin}}/voucher/types/24",
					"host": [
						"{{base_url_admin}}"
					],
					"path": [
						"voucher",
						"types",
						"24"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}